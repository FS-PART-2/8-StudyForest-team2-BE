@baseUrl = http://localhost:3000
@path = /api/users
@register = {{baseUrl}}{{path}}/register
### ------------------------------------------------------------
### 1) 회원가입 성공 케이스
### ------------------------------------------------------------
POST {{register}}
Content-Type: application/json

{
  "username": "chijunee",
  "email": "me@example.com",
  "password": "Abcd1234!",
  "nick": "원치준"
}

### ------------------------------------------------------------
### 2) 이메일/아이디 중복 케이스 (위와 동일 값 재요청 → 409 기대)
### ------------------------------------------------------------
POST {{register}}
Content-Type: application/json

{
  "username": "chijunee",
  "email": "me@example.com",
  "password": "Abcd1234!",
  "nick": "원치준"
}

### ------------------------------------------------------------
### 3) 잘못된 이메일 형식 (400 기대)
### ------------------------------------------------------------
POST {{register}}
Content-Type: application/json

{
  "username": "chijunee2",
  "email": "not-an-email",
  "password": "Abcd1234!",
  "nick": "치준"
}

### ------------------------------------------------------------
### 4) 비밀번호 정책 위반 - 8자 미만 (400 기대)
### ------------------------------------------------------------
POST {{register}}
Content-Type: application/json

{
  "username": "shortpass",
  "email": "short@example.com",
  "password": "Abc123",  
  "nick": "치준"
}

### ------------------------------------------------------------
### 5) 비밀번호 정책 위반 - 대/소문자/숫자 미포함 (400 기대)
### ------------------------------------------------------------
POST {{register}}
Content-Type: application/json

{
  "username": "nopolicy",
  "email": "nopolicy@example.com",
  "password": "abcdefgh",  
  "nick": "정책위반"
}


### ------------------------------------------------------------
### 7) username 포맷 위반 
###    * 만약 username 검증을 express-validator에 추가했다면 유효성 실패로 떨어짐
### ------------------------------------------------------------
POST {{register}}
Content-Type: application/json

{
  "username": "bad name!", 
  "email": "baduser@example.com",
  "password": "Abcd1234!",
  "nick": "배드유저"
}
###
@baseUrl = http://localhost:3000
@path = /api/users
@login = {{baseUrl}}{{path}}/login
@refresh = {{baseUrl}}{{path}}/refresh
@logout = {{baseUrl}}{{path}}/logout
### ------------------------------------------------------------
### 1) 로그인 성공 (200 기대)
###    - 위 회원가입 테스트에서 생성한 계정 사용
###    - 응답: accessToken (JSON), refreshToken (httpOnly 쿠키)
### ------------------------------------------------------------
POST {{login}}
Content-Type: application/json

{
  "email": "me@example.com",
  "password": "Abcd1234!"
}

### ------------------------------------------------------------
### 2) 잘못된 비밀번호 (401 기대)
### ------------------------------------------------------------
POST {{login}}
Content-Type: application/json

{
  "email": "me@example.com",
  "password": "WrongPass123"
}

### ------------------------------------------------------------
### 3) 존재하지 않는 이메일 (401 기대)
### ------------------------------------------------------------
POST {{login}}
Content-Type: application/json

{
  "email": "nouser@example.com",
  "password": "Abcd1234!"
}

### ------------------------------------------------------------
### 4) 유효성 실패 - 이메일 형식 아님 (400 기대)
### ------------------------------------------------------------
POST {{login}}
Content-Type: application/json

{
  "email": "not-an-email",
  "password": "Abcd1234!"
}

### ------------------------------------------------------------
### 5) 유효성 실패 - 비밀번호 8자 미만 (400 기대)
### ------------------------------------------------------------
POST {{login}}
Content-Type: application/json

{
  "email": "me@example.com",
  "password": "Abc123"
}

### ------------------------------------------------------------
### 6) 액세스 토큰 재발급 (200 기대)
###    - 1)에서 받은 httpOnly refreshToken 쿠키를 사용
###    - 응답: 새 accessToken (JSON), 새 refreshToken (쿠키 회전)
### ------------------------------------------------------------
POST {{refresh}}
Content-Type: application/json

{}

### ------------------------------------------------------------
### 7) 로그아웃 (200 기대)
###    - 현재 보유한 refreshToken 쿠키 무효화 + 쿠키 삭제
### ------------------------------------------------------------
POST {{logout}}
Content-Type: application/json

{}